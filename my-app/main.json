[
    [
       {
          "apiVersion": "v1",
          "kind": "ServiceAccount",
          "metadata": {
             "annotations": {
                "argocd.argoproj.io/sync-wave": "-2",
                "eks.amazonaws.com/role-arn": "arn:aws:iam::684154893900:role/api/application-eu-west-1-1vapi-1-k8s-argocd-aws"
             },
             "name": "argocd-aws-svc-acc",
             "namespace": "argocd"
          }
       },
       {
          "apiVersion": "batch/v1",
          "kind": "Job",
          "metadata": {
             "annotations": {
                "argocd.argoproj.io/hook": "PreSync",
                "argocd.argoproj.io/hook-delete-policy": "Never",
                "argocd.argoproj.io/sync-wave": "-4"
             },
             "finalizers": [
                "resources-finalizer.argocd.argoproj.io"
             ],
             "namespace": "argocd"
          },
          "spec": {
             "backoffLimit": [
                {
                   "args": "echo \"check if this is working\";",
                   "command": [
                      "/bin/bash",
                      "-c"
                   ],
                   "image": "amazon/aws-cli",
                   "name": "awscli"
                }
             ],
             "template": {
                "spec": {
                   "containers": "HookSucceeded",
                   "restartPolicy": "argocd-aws-svc-acc",
                   "serviceAccountName": 2
                }
             }
          }
       }
    ],
    {
       "apiVersion": "argoproj.io/v1alpha1",
       "kind": "Application",
       "metadata": {
          "annotations": {
             "argocd.argoproj.io/sync-wave": "-4"
          },
          "finalizers": [
             "resources-finalizer.argocd.argoproj.io"
          ],
          "namespace": "argocd"
       },
       "spec": {
          "destination": {
             "namespace": "argocd",
             "server": "https://kubernetes.default.svc"
          },
          "project": "app-root-prj",
          "source": {
             "path": "argocd",
             "plugin": {
                "env": [
                   {
                      "name": "JSONNET_FILENAME",
                      "value": "environments/dev/eu-west-1/1vapi-1/cluster-services.jsonnet"
                   }
                ],
                "name": "jb"
             },
             "repoURL": "https://github.com/vonage/1vapigw-k8s",
             "targetRevision": "master"
          },
          "syncPolicy": {
             "automated": {
                "prune": true,
                "selfHeal": true
             }
          }
       }
    },
    {
       "apiVersion": "argoproj.io/v1alpha1",
       "kind": "Application",
       "metadata": {
          "annotations": {
             "argocd.argoproj.io/sync-wave": "-4"
          },
          "finalizers": [
             "resources-finalizer.argocd.argoproj.io"
          ],
          "namespace": "argocd"
       },
       "spec": {
          "destination": {
             "namespace": "argocd",
             "server": "https://kubernetes.default.svc"
          },
          "project": "app-root-prj",
          "source": {
             "path": "argocd",
             "plugin": {
                "env": [
                   {
                      "name": "JSONNET_FILENAME",
                      "value": "environments/dev/eu-west-1/1vapi-1/nexmo-api-gateway.jsonnet"
                   }
                ],
                "name": "jb"
             },
             "repoURL": "https://github.com/vonage/1vapigw-k8s",
             "targetRevision": "master"
          },
          "syncPolicy": {
             "automated": {
                "prune": true,
                "selfHeal": true
             }
          }
       }
    },
    {
       "apiVersion": "argoproj.io/v1alpha1",
       "kind": "Application",
       "metadata": {
          "annotations": {
             "argocd.argoproj.io/sync-wave": "-4"
          },
          "finalizers": [
             "resources-finalizer.argocd.argoproj.io"
          ],
          "namespace": "argocd"
       },
       "spec": {
          "destination": {
             "namespace": "argocd",
             "server": "https://kubernetes.default.svc"
          },
          "project": "app-root-prj",
          "source": {
             "path": "argocd",
             "plugin": {
                "env": [
                   {
                      "name": "JSONNET_FILENAME",
                      "value": "environments/dev/eu-west-1/1vapi-1/nexmo-routes.jsonnet"
                   }
                ],
                "name": "jb"
             },
             "repoURL": "https://github.com/vonage/1vapigw-k8s",
             "targetRevision": "master"
          },
          "syncPolicy": {
             "automated": {
                "prune": true,
                "selfHeal": true
             }
          }
       }
    }
 ]
 